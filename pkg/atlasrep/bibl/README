
Transforming BibTeX format files into BibXMLext format files -- Some Hints
--------------------------------------------------------------------------

We assume that we start with a <F>.bib</F> file.

<List>
<Item>
   Check the contents for obvious mistakes, for example in formulae.
   Even entries retrieved from MathSciNet may be erroneous.
</Item>
<Item>
   Replace typical character markup
   using GAPDoc's <C>HeuristicTranslationsLaTeX2XML.ApplyToFile</C>.
</Item>
<Item>
   In <C>@mastersthesis</C> and <C>@phdthesis</C> entries,
   use the <C>type</C> field not the <C>note</C> field for information
   such as <Q>Habilitationsschrift</Q> or <Q>Diplomarbeit</Q>.
   (BibTeX may use a default derived from the entry type <E>and</E> the
   <C>note</C> field.)
</Item>
<Item>
   Make sure that no <C>volume</C> field is present in <C>@article</C> type
   entries that have a <C>number</C> field.
   (BibTeX will complain about this, the GAPDoc functions do not.)
</Item>
<Item>
   Produce a BibXMLext format file with the data of this file,
   using <Ref Func="ParseBibStrings" BookName="gapdoc"/>
   and <Ref Func="WriteBibXMLextFile" BookName="gapdoc"/>.

   Note that syntactically incorrect entries are ignored by
   <Ref Func="WriteBibXMLextFile" BookName="gapdoc"/>,
   so it may be necessary to edit (or omit) such entries before
   one proceeds.
</Item>
<Item>
   Occurrences of <C>\href</C> or <C>http</C> should be turned into
   <C>&lt;URL&gt;</C> elements.
</Item>
<Item>
   Check that no macros <C>\{</C> and <C>\}</C> occur outside math mode.
   In particular, these macros should not be used as outer brackets in
   <C>note</C> fields of the <C>.bib</C> file.
</Item>
<Item>
   Remove the macros <C>\scr</C>, <C>\cyr</C>, <C>\germ</C>.
   Replace <C>\bfcdot</C> by <C>\cdot</C>,
   <C>\cflex </C> by <C>^</C>,
   <C>\vert</C> by <C>|</C> or <C>\mid</C>.

   If <C>$\cdot$</C> occurs in a name (for example in the publisher field)
   then replace it by <C>&amp;#183;</C>.

   Where <C>\hat</C> or <C>\widehat</C> occur without argument in curly
   brackets (for example <C>\hat M</C>), insert these brackets
   (which may be turned into double curly brackets in the Text format
   of the bibliography).
</Item>
<Item>
   Use <C>&lt;C&gt;</C> elements (protection against decapitalization,
   marked with curly brackets in the BibTeX file)
   only in the <C>title</C> field of entries,
   in particular not in the fields <C>series</C>, <C>school</C>,
   <C>address</C>.
</Item>
<Item>
   Improve the formulae that occur in <C>&lt;M&gt;</C> elements,
   using <C>StringWithImprovedMathElements</C>,
   see the file <F>mathxml.g</F>.
   Instead of actually applying all proposed improvements,
   it may be useful to list the proposals, and to apply the reasonable
   ones using editor macros (such as global replacements).

   Check whether some of the <C>&lt;Math&gt;</C> elements that were
   introduced in this step
   (note that <Ref Func="WriteBibXMLextFile" BookName="gapdoc"/> does
   <E>not</E> introduce such elements) 
   can be turned into <C>&lt;M&gt;</C> elements.
</Item>
<Item>
   In rare cases, entries may contain <Q>artwork</Q> (which may also be
   marked as such).
   Deal with it, for example via <C>&lt;Alt&gt;</C> elements.
</Item>
<Item>
   The <C>title</C> or <C>note</C> field of an entry may contain an
   <Q>implicit reference</Q> to another entry,
   for example by citing its title with explanations such as <Q>Errata</Q>,
   <Q>Addendum</Q>, <Q>Addenda</Q>, <Q>Corrections</Q>, <Q>Corrigendum</Q>,
   or <Q>Reprint of</Q>.
   An <C>&lt;other type="intref"&gt;</C> element can make this reference
   explicit.
   Then a <C>&lt;Wrap Name="IntRef"&gt;</C> element together with
   appropriate handlers for the HTML version can be used to create
   a hyperlink to the cited entry,
   provided that it is also contained in the list of references.
</Item>
<Item>
   The abovementioned implicit references can even describe a complete
   <Q>embedded</Q> entry, with journal name, number, year, and pages.
   In such cases,
   one can use <C>&lt;Wrap Name="Bib_journal"&gt;</C> etc. elements
   for marking the different parts,
   and appropriate handlers can evaluate these elements,
   in order to make the contents look like in the corresponding fields of
   the entries of the bibliography.
   (See the function <C>AddHandlersBibliography</C> in the file
   <F>bibutils.g</F>.)
</Item>
<Item>
   Check <E>whitespace</E> in situations such as
   comma separated enumerations in math mode
   (for example, whitespace should be introduced in <C>L_4(2),A_7,3S_6</C>),
   factorized numbers
   (for example in <C>2^{14}3^3 5^3 7 \cdot 13 \cdot 29</C>),
   before opening brackets
   (where it might be appropriate to remove whitespace),
   in <C>pages</C> ranges
   (where whitespace probably should be removed),
   or before <C>&amp;lt;</C>
   (where whitespace should probably be inserted).
</Item>
</List>

In the end, call <Ref Func="WriteBibFile" BookName="gapdoc"/> in order to
create a BibTeX file from the BibXMLext file,
process this file with BibTeX, and deal with warnings such as
<Q>Warning--to sort, need editor, organization, or key in ...</Q>.

Some of the LaTeX markup created by 
<Ref Func="WriteBibFile" BookName="gapdoc"/> may be nonstandard,
for example <C>\DH</C>;
and LaTeX will print error messages in this case.
(This may happen also for entries obtained from MathSciNet.)

