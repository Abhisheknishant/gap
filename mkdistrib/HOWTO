This directory contains files to wrap up a distribution of GAP4, compiling
GAP under linux and with the Winooze compiler, creating completion
files, running the test files, creating the manuals,
TeXing them, creating an html version and finally wrapping everything up.

The distribution is built under /scratch/gap4dist (this is set in `setvar')

The file `setvar' will need editing depending on the linux version used and
the cvs path.

Before you start, make sure to adjust the kernel version number for the
release, as well as the default windows path.
For this change the values of the variables `SyKernelVersion' and
`SyWindowsPath' in src/system.c and commit the  change.

The files assume that

- The current version is OK (testfiles &c.).
- enough disk space (1GB+) is available
- packages to include in the main distribution are under
  /home/ftp/gappre/sys<version>
- share packages are in /home/ftp/gappre/share<version>
- deposited packages are in /home/ftp/gappre/dep<version>
- Type1 PS fonts, `tth', `zoo' and `unzoo' are installed locally. (This all
  holds for `shades'.)
- doc/build/config.install sets the right version number variables.
- cvs path set in `setvar'.
- standard `gcc' setup under linux
- The `cygwin1.dll' file for Windos resides under /gap/4.0/bin
- The wrapper scripts (in particular `zooit' and `setvar') reflect the
  latest version of GAP and `compile' and `windowscompile' give the right
  binary paths.

======

To build, go into this directory and call

  doit x 

where x is the number of the version (4rx) to be wrapped up.

After some time the program will prompt you to transfer a file to the
Windows machine, compile it there under cygwin and transfer the result back.
Then it continues zooing everything up.

On  Wedderburn checkout takes only a few minutes, but zooing
takesmost of an hour. You can write the
announcement during this time.

The wrapping script (zooit) is designed to exploit a multi-processor
machine (zoo, zip and tar run in parallel) with a lot of memory (for 
file caches).

======

Transfer the files on the ftp server and ensure they install. (You'll need
to get Mac binaries from Burkhard!)

======

Remove the old version of GAP, and the bugfixes.

======

Create a branch for the version under cvs (this is commented out in the
wrapper scripts as it has been frequently necessary to call the building
process a second time because something was forgotten):

  cvs rtag -b GAP4RX 4.0

Afterwards it is possible again to check in changes.

======

cvs remove the old WWW/Manual4 manual (except index.html), unzoo the
htm_small.zoo file, cvs add its files and commit.
(Probably at some point change the WWW setup so that the manual is built
locally)

======

Edit /gap/WWW/Util/DEFAULTS to give the new version number, edit
WWW/Info4/{distrib.input,bugfixes.input,announce.input,changes.input} and
WWW/bib/cite4.input to reflect the new status. Make and commit.

======

Send out the announcement.

   Alexander Hulpke, 8-Dec-2000
